<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>日志处理 | Python 修炼手册</title>
    <meta name="generator" content="VuePress 1.5.3">
    <link rel="icon" href="https://i.loli.net/2020/02/25/AOjBhkIxtb8dRgl.png">
    <meta name="description" content="深入浅出的Python学习文档，从Python基础和高级编程到算法数据结构,Web开发，爬虫，大数据和人工智能">
    <link rel="preload" href="/python/assets/css/0.styles.055cc0b1.css" as="style"><link rel="preload" href="/python/assets/js/app.e1ee403d.js" as="script"><link rel="preload" href="/python/assets/js/2.968a03f5.js" as="script"><link rel="preload" href="/python/assets/js/18.a3db5906.js" as="script"><link rel="prefetch" href="/python/assets/js/10.012951f0.js"><link rel="prefetch" href="/python/assets/js/11.94282480.js"><link rel="prefetch" href="/python/assets/js/12.44b4fd9e.js"><link rel="prefetch" href="/python/assets/js/13.a13f0565.js"><link rel="prefetch" href="/python/assets/js/14.d8e39cac.js"><link rel="prefetch" href="/python/assets/js/15.46786c41.js"><link rel="prefetch" href="/python/assets/js/16.b85eb3ee.js"><link rel="prefetch" href="/python/assets/js/17.96eaba02.js"><link rel="prefetch" href="/python/assets/js/19.588c0903.js"><link rel="prefetch" href="/python/assets/js/20.34ac6f63.js"><link rel="prefetch" href="/python/assets/js/21.4b026890.js"><link rel="prefetch" href="/python/assets/js/22.5508086b.js"><link rel="prefetch" href="/python/assets/js/23.7d5489f6.js"><link rel="prefetch" href="/python/assets/js/24.2885ce1a.js"><link rel="prefetch" href="/python/assets/js/25.c7bff1ee.js"><link rel="prefetch" href="/python/assets/js/26.f7ed45c0.js"><link rel="prefetch" href="/python/assets/js/27.999c5b6b.js"><link rel="prefetch" href="/python/assets/js/28.fac536a2.js"><link rel="prefetch" href="/python/assets/js/29.2edd588d.js"><link rel="prefetch" href="/python/assets/js/3.00a5d3f8.js"><link rel="prefetch" href="/python/assets/js/30.02da556d.js"><link rel="prefetch" href="/python/assets/js/31.8b2e3d98.js"><link rel="prefetch" href="/python/assets/js/32.b4efad96.js"><link rel="prefetch" href="/python/assets/js/33.85e23546.js"><link rel="prefetch" href="/python/assets/js/34.d1dec00c.js"><link rel="prefetch" href="/python/assets/js/35.b9ff4b4d.js"><link rel="prefetch" href="/python/assets/js/36.00458c5e.js"><link rel="prefetch" href="/python/assets/js/37.b5a94735.js"><link rel="prefetch" href="/python/assets/js/38.f228b7cb.js"><link rel="prefetch" href="/python/assets/js/39.4bd30457.js"><link rel="prefetch" href="/python/assets/js/4.ca72af8b.js"><link rel="prefetch" href="/python/assets/js/40.1d2da048.js"><link rel="prefetch" href="/python/assets/js/41.57a29faf.js"><link rel="prefetch" href="/python/assets/js/42.4f688b9c.js"><link rel="prefetch" href="/python/assets/js/43.914d9eb9.js"><link rel="prefetch" href="/python/assets/js/44.f0e4f09d.js"><link rel="prefetch" href="/python/assets/js/45.9e3d4438.js"><link rel="prefetch" href="/python/assets/js/46.e64c4e17.js"><link rel="prefetch" href="/python/assets/js/47.74008a88.js"><link rel="prefetch" href="/python/assets/js/48.e81f8b9b.js"><link rel="prefetch" href="/python/assets/js/5.c4e0eacc.js"><link rel="prefetch" href="/python/assets/js/6.68364987.js"><link rel="prefetch" href="/python/assets/js/7.8ab3a63c.js"><link rel="prefetch" href="/python/assets/js/8.9add6df9.js"><link rel="prefetch" href="/python/assets/js/9.c501f952.js">
    <link rel="stylesheet" href="/python/assets/css/0.styles.055cc0b1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/python/" class="home-link router-link-active"><!----> <span class="site-name">Python 修炼手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/python/basic/intro.html" class="nav-link">
  Get Start
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Books" class="dropdown-title"><span class="title">Books</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://ccstudio.org/dotnet" target="_blank" rel="noopener noreferrer" class="nav-link external">
  .Net Core
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ccstudio.org/linux" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linux
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ccstudio.org/architecture" target="_blank" rel="noopener noreferrer" class="nav-link external">
  系统架构设计
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://ccstudio.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/colin-chang/python" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/python/basic/intro.html" class="nav-link">
  Get Start
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Books" class="dropdown-title"><span class="title">Books</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://ccstudio.org/dotnet" target="_blank" rel="noopener noreferrer" class="nav-link external">
  .Net Core
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ccstudio.org/linux" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Linux
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://ccstudio.org/architecture" target="_blank" rel="noopener noreferrer" class="nav-link external">
  系统架构设计
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div><div class="nav-item"><a href="https://ccstudio.org/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Blog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/colin-chang/python" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/basic/intro.html" class="sidebar-link">Python简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/intro.html#_1-python介绍" class="sidebar-link">1. Python介绍</a></li><li class="sidebar-sub-header"><a href="/python/basic/intro.html#_2-python与ai" class="sidebar-link">2. Python与AI</a></li><li class="sidebar-sub-header"><a href="/python/basic/intro.html#_3-python应用场景" class="sidebar-link">3. Python应用场景</a></li><li class="sidebar-sub-header"><a href="/python/basic/intro.html#_4-python版本" class="sidebar-link">4. Python版本</a></li></ul></li><li><a href="/python/basic/ide.html" class="sidebar-link">Python执行方式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/ide.html#_1-解释器执行" class="sidebar-link">1. 解释器执行</a></li><li class="sidebar-sub-header"><a href="/python/basic/ide.html#_2-交互式执行python" class="sidebar-link">2. 交互式执行Python</a></li><li class="sidebar-sub-header"><a href="/python/basic/ide.html#_3-python-ide" class="sidebar-link">3. Python IDE</a></li></ul></li><li><a href="/python/basic/standard.html" class="sidebar-link">代码规范</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/standard.html#_1-注释" class="sidebar-link">1. 注释</a></li><li class="sidebar-sub-header"><a href="/python/basic/standard.html#_2-中文支持" class="sidebar-link">2. 中文支持</a></li><li class="sidebar-sub-header"><a href="/python/basic/standard.html#_3-命名规则" class="sidebar-link">3. 命名规则</a></li><li class="sidebar-sub-header"><a href="/python/basic/standard.html#_4-代码规范" class="sidebar-link">4. 代码规范</a></li><li class="sidebar-sub-header"><a href="/python/basic/standard.html#_5-pass" class="sidebar-link">5. pass</a></li></ul></li><li><a href="/python/basic/io.html" class="sidebar-link">输入输出</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/io.html#_1-输入" class="sidebar-link">1. 输入</a></li><li class="sidebar-sub-header"><a href="/python/basic/io.html#_2-输出" class="sidebar-link">2. 输出</a></li><li class="sidebar-sub-header"><a href="/python/basic/io.html#_3-程序参数" class="sidebar-link">3. 程序参数</a></li></ul></li><li><a href="/python/basic/datatype.html" class="sidebar-link">数据类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/datatype.html#_1-数据类型" class="sidebar-link">1. 数据类型</a></li><li class="sidebar-sub-header"><a href="/python/basic/datatype.html#_2-数据类型转换" class="sidebar-link">2. 数据类型转换</a></li><li class="sidebar-sub-header"><a href="/python/basic/datatype.html#_3-对象引用" class="sidebar-link">3. 对象引用</a></li><li class="sidebar-sub-header"><a href="/python/basic/datatype.html#_4-可变类型-不可变类型" class="sidebar-link">4. 可变类型/不可变类型</a></li></ul></li><li><a href="/python/basic/operator.html" class="sidebar-link">运算符</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/operator.html#_1-算术运算符" class="sidebar-link">1. 算术运算符</a></li><li class="sidebar-sub-header"><a href="/python/basic/operator.html#_2-赋值运算符" class="sidebar-link">2. 赋值运算符</a></li><li class="sidebar-sub-header"><a href="/python/basic/operator.html#_3-比较运算符" class="sidebar-link">3. 比较运算符</a></li><li class="sidebar-sub-header"><a href="/python/basic/operator.html#_4-逻辑运算符" class="sidebar-link">4. 逻辑运算符</a></li><li class="sidebar-sub-header"><a href="/python/basic/operator.html#_5-位运算符" class="sidebar-link">5. 位运算符</a></li></ul></li><li><a href="/python/basic/processctrl.html" class="sidebar-link">流控制语句</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/processctrl.html#_1-条件语句" class="sidebar-link">1. 条件语句</a></li><li class="sidebar-sub-header"><a href="/python/basic/processctrl.html#_2-循环语句" class="sidebar-link">2. 循环语句</a></li></ul></li><li><a href="/python/basic/str.html" class="sidebar-link">字符串</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/str.html#_1-字符串基础" class="sidebar-link">1. 字符串基础</a></li><li class="sidebar-sub-header"><a href="/python/basic/str.html#_2-常用操作" class="sidebar-link">2. 常用操作</a></li><li class="sidebar-sub-header"><a href="/python/basic/str.html#_3-正则表达式" class="sidebar-link">3. 正则表达式</a></li></ul></li><li><a href="/python/basic/list.html" class="sidebar-link">列表 / 元组 / 集合</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/list.html#_1-列表" class="sidebar-link">1. 列表</a></li><li class="sidebar-sub-header"><a href="/python/basic/list.html#_2-元组" class="sidebar-link">2. 元组</a></li><li class="sidebar-sub-header"><a href="/python/basic/list.html#_3-集合" class="sidebar-link">3. 集合</a></li></ul></li><li><a href="/python/basic/dict.html" class="sidebar-link">字典</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/dict.html#_1-字典简介" class="sidebar-link">1. 字典简介</a></li><li class="sidebar-sub-header"><a href="/python/basic/dict.html#_2-crud" class="sidebar-link">2. CRUD</a></li><li class="sidebar-sub-header"><a href="/python/basic/dict.html#_3-遍历" class="sidebar-link">3. 遍历</a></li></ul></li><li><a href="/python/basic/function.html" class="sidebar-link">函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/function.html#_1-声明调用" class="sidebar-link">1. 声明调用</a></li><li class="sidebar-sub-header"><a href="/python/basic/function.html#_2-函数参数" class="sidebar-link">2. 函数参数</a></li><li class="sidebar-sub-header"><a href="/python/basic/function.html#_3-作用域" class="sidebar-link">3. 作用域</a></li><li class="sidebar-sub-header"><a href="/python/basic/function.html#_4-lambda-匿名函数" class="sidebar-link">4. lambda 匿名函数</a></li><li class="sidebar-sub-header"><a href="/python/basic/function.html#_5-闭包" class="sidebar-link">5. 闭包</a></li><li class="sidebar-sub-header"><a href="/python/basic/function.html#_6-内建函数" class="sidebar-link">6. 内建函数</a></li></ul></li><li><a href="/python/basic/oo.html" class="sidebar-link">面向对象</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/oo.html#_1-类" class="sidebar-link">1. 类</a></li><li class="sidebar-sub-header"><a href="/python/basic/oo.html#_2-类内建属性和方法" class="sidebar-link">2. 类内建属性和方法</a></li><li class="sidebar-sub-header"><a href="/python/basic/oo.html#_3-property" class="sidebar-link">3. property</a></li><li class="sidebar-sub-header"><a href="/python/basic/oo.html#_4-类级别成员" class="sidebar-link">4. 类级别成员</a></li><li class="sidebar-sub-header"><a href="/python/basic/oo.html#_5-继承" class="sidebar-link">5. 继承</a></li><li class="sidebar-sub-header"><a href="/python/basic/oo.html#_6-多态" class="sidebar-link">6. 多态</a></li></ul></li><li><a href="/python/basic/module.html" class="sidebar-link">模块 / 包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/module.html#_1-模块简介" class="sidebar-link">1. 模块简介</a></li><li class="sidebar-sub-header"><a href="/python/basic/module.html#_2-导入模块" class="sidebar-link">2. 导入模块</a></li><li class="sidebar-sub-header"><a href="/python/basic/module.html#_3-模块高级" class="sidebar-link">3. 模块高级</a></li><li class="sidebar-sub-header"><a href="/python/basic/module.html#_4-包" class="sidebar-link">4. 包</a></li><li class="sidebar-sub-header"><a href="/python/basic/module.html#_5-标准库" class="sidebar-link">5. 标准库</a></li></ul></li><li><a href="/python/basic/accessibility.html" class="sidebar-link">可访问性</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/accessibility.html#_1-可访问性" class="sidebar-link">1. 可访问性</a></li><li class="sidebar-sub-header"><a href="/python/basic/accessibility.html#_2-名字重整" class="sidebar-link">2. 名字重整</a></li></ul></li><li><a href="/python/basic/copy.html" class="sidebar-link">深拷贝与浅拷贝</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/copy.html#_1-深拷贝与浅拷贝" class="sidebar-link">1. 深拷贝与浅拷贝</a></li><li class="sidebar-sub-header"><a href="/python/basic/copy.html#_2-浅拷贝" class="sidebar-link">2. 浅拷贝</a></li><li class="sidebar-sub-header"><a href="/python/basic/copy.html#_3-深拷贝" class="sidebar-link">3. 深拷贝</a></li><li class="sidebar-sub-header"><a href="/python/basic/copy.html#_4-copy-copy" class="sidebar-link">4. copy.copy()</a></li></ul></li><li><a href="/python/basic/file.html" class="sidebar-link">文件操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/file.html#_1-文件读写" class="sidebar-link">1. 文件读写</a></li><li class="sidebar-sub-header"><a href="/python/basic/file.html#_2-文件-目录操作" class="sidebar-link">2. 文件 / 目录操作</a></li><li class="sidebar-sub-header"><a href="/python/basic/file.html#_3-路径操作" class="sidebar-link">3. 路径操作</a></li><li class="sidebar-sub-header"><a href="/python/basic/file.html#_4-案例" class="sidebar-link">4.案例</a></li></ul></li><li><a href="/python/basic/exception.html" class="sidebar-link">异常处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/exception.html#_1-异常基本处理" class="sidebar-link">1. 异常基本处理</a></li><li class="sidebar-sub-header"><a href="/python/basic/exception.html#_2-自定义异常" class="sidebar-link">2. 自定义异常</a></li></ul></li><li><a href="/python/basic/logging.html" aria-current="page" class="active sidebar-link">日志处理</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/basic/logging.html#_1-logging-简单日志" class="sidebar-link">1. logging 简单日志</a></li><li class="sidebar-sub-header"><a href="/python/basic/logging.html#_2-logging-组件" class="sidebar-link">2. logging 组件</a></li><li class="sidebar-sub-header"><a href="/python/basic/logging.html#_3-日志处理" class="sidebar-link">3. 日志处理</a></li><li class="sidebar-sub-header"><a href="/python/basic/logging.html#_4-日志配置" class="sidebar-link">4. 日志配置</a></li><li class="sidebar-sub-header"><a href="/python/basic/logging.html#_5-记录上下文信息" class="sidebar-link">5. 记录上下文信息</a></li><li class="sidebar-sub-header"><a href="/python/basic/logging.html#_6-分布式日志" class="sidebar-link">6. 分布式日志</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Python高级</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/senior/generator.html" class="sidebar-link">生成器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/generator.html#_1-生成器" class="sidebar-link">1. 生成器</a></li><li class="sidebar-sub-header"><a href="/python/senior/generator.html#_2-生成器推导式" class="sidebar-link">2. 生成器推导式</a></li><li class="sidebar-sub-header"><a href="/python/senior/generator.html#_3-yield" class="sidebar-link">3. yield</a></li><li class="sidebar-sub-header"><a href="/python/senior/generator.html#_4-send" class="sidebar-link">4. send</a></li></ul></li><li><a href="/python/senior/iterator.html" class="sidebar-link">迭代器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/iterator.html#_1-可迭代对象" class="sidebar-link">1. 可迭代对象</a></li><li class="sidebar-sub-header"><a href="/python/senior/iterator.html#_2-迭代器" class="sidebar-link">2. 迭代器</a></li></ul></li><li><a href="/python/senior/decorator.html" class="sidebar-link">装饰器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/decorator.html#_1-装饰器" class="sidebar-link">1. 装饰器</a></li><li class="sidebar-sub-header"><a href="/python/senior/decorator.html#_2-多装饰器" class="sidebar-link">2. 多装饰器</a></li><li class="sidebar-sub-header"><a href="/python/senior/decorator.html#_3-参数与返回值" class="sidebar-link">3. 参数与返回值</a></li><li class="sidebar-sub-header"><a href="/python/senior/decorator.html#_4-有参装饰器" class="sidebar-link">4. 有参装饰器</a></li><li class="sidebar-sub-header"><a href="/python/senior/decorator.html#_5-类装饰器" class="sidebar-link">5. 类装饰器</a></li><li class="sidebar-sub-header"><a href="/python/senior/decorator.html#_6-wraps-装饰器" class="sidebar-link">6. wraps 装饰器</a></li></ul></li><li><a href="/python/senior/contextmanager.html" class="sidebar-link">上下文管理器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/contextmanager.html#_1-上下文管理器" class="sidebar-link">1. 上下文管理器</a></li><li class="sidebar-sub-header"><a href="/python/senior/contextmanager.html#_2-contextmanager" class="sidebar-link">2. contextmanager</a></li></ul></li><li><a href="/python/senior/dynamic.html" class="sidebar-link">动态扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/dynamic.html#_1-动态语言" class="sidebar-link">1. 动态语言</a></li><li class="sidebar-sub-header"><a href="/python/senior/dynamic.html#_2-动态扩展对象" class="sidebar-link">2. 动态扩展对象</a></li><li class="sidebar-sub-header"><a href="/python/senior/dynamic.html#_3-slots" class="sidebar-link">3. __slots__</a></li></ul></li><li><a href="/python/senior/metaclass.html" class="sidebar-link">元类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/metaclass.html#_1-类对象" class="sidebar-link">1. 类对象</a></li><li class="sidebar-sub-header"><a href="/python/senior/metaclass.html#_2-type-类" class="sidebar-link">2. type 类</a></li><li class="sidebar-sub-header"><a href="/python/senior/metaclass.html#_3-元类" class="sidebar-link">3. 元类</a></li></ul></li><li><a href="/python/senior/intern.html" class="sidebar-link">对象池与intern</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/intern.html#_1-字母小整数对象池" class="sidebar-link">1. 字母小整数对象池</a></li><li class="sidebar-sub-header"><a href="/python/senior/intern.html#_2-intern" class="sidebar-link">2. intern</a></li></ul></li><li><a href="/python/senior/gc.html" class="sidebar-link">垃圾回收（GC）</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/gc.html#_1-引用计数" class="sidebar-link">1. 引用计数</a></li><li class="sidebar-sub-header"><a href="/python/senior/gc.html#_2-分代回收" class="sidebar-link">2. 分代回收</a></li><li class="sidebar-sub-header"><a href="/python/senior/gc.html#_3-gc-模块" class="sidebar-link">3. gc 模块</a></li></ul></li><li><a href="/python/senior/pdb.html" class="sidebar-link">pdb 调试工具</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/pdb.html#_1-使用方式" class="sidebar-link">1. 使用方式</a></li><li class="sidebar-sub-header"><a href="/python/senior/pdb.html#_2-pdb命令" class="sidebar-link">2. pdb命令</a></li></ul></li><li><a href="/python/senior/process.html" class="sidebar-link">多进程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/process.html#_1-fork" class="sidebar-link">1. fork</a></li><li class="sidebar-sub-header"><a href="/python/senior/process.html#_2-process" class="sidebar-link">2. Process</a></li><li class="sidebar-sub-header"><a href="/python/senior/process.html#_3-进程池" class="sidebar-link">3. 进程池</a></li><li class="sidebar-sub-header"><a href="/python/senior/process.html#_4-进程间通信-ipc" class="sidebar-link">4. 进程间通信(IPC)</a></li><li class="sidebar-sub-header"><a href="/python/senior/process.html#_5-cow" class="sidebar-link">5. COW</a></li></ul></li><li><a href="/python/senior/thread.html" class="sidebar-link">多线程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/thread.html#_1-多线程" class="sidebar-link">1. 多线程</a></li><li class="sidebar-sub-header"><a href="/python/senior/thread.html#_2-线程同步" class="sidebar-link">2. 线程同步</a></li><li class="sidebar-sub-header"><a href="/python/senior/thread.html#_3-数据共享" class="sidebar-link">3. 数据共享</a></li><li class="sidebar-sub-header"><a href="/python/senior/thread.html#_4-全局解释器锁-gil" class="sidebar-link">4. 全局解释器锁 (GIL)</a></li></ul></li><li><a href="/python/senior/coroutine.html" class="sidebar-link">协程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/coroutine.html#_1-协程" class="sidebar-link">1. 协程</a></li><li class="sidebar-sub-header"><a href="/python/senior/coroutine.html#_2-yield-协程" class="sidebar-link">2. yield 协程</a></li><li class="sidebar-sub-header"><a href="/python/senior/coroutine.html#_3-greenlet" class="sidebar-link">3. greenlet</a></li><li class="sidebar-sub-header"><a href="/python/senior/coroutine.html#_4-gevent" class="sidebar-link">4. gevent</a></li></ul></li><li><a href="/python/senior/network.html" class="sidebar-link">网络通信</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/network.html#_1-tcp-ip" class="sidebar-link">1. TCP/IP</a></li><li class="sidebar-sub-header"><a href="/python/senior/network.html#_2-划分子网" class="sidebar-link">2. 划分子网</a></li><li class="sidebar-sub-header"><a href="/python/senior/network.html#_3-局域网组网" class="sidebar-link">3. 局域网组网</a></li><li class="sidebar-sub-header"><a href="/python/senior/network.html#_4-跨网络通信" class="sidebar-link">4. 跨网络通信</a></li><li class="sidebar-sub-header"><a href="/python/senior/network.html#_5-dns" class="sidebar-link">5. DNS</a></li><li class="sidebar-sub-header"><a href="/python/senior/network.html#_6-常见网络攻击" class="sidebar-link">6. 常见网络攻击</a></li></ul></li><li><a href="/python/senior/udp.html" class="sidebar-link">UDP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/udp.html#_1-socket" class="sidebar-link">1. Socket</a></li><li class="sidebar-sub-header"><a href="/python/senior/udp.html#_2-udp-协议" class="sidebar-link">2. UDP 协议</a></li><li class="sidebar-sub-header"><a href="/python/senior/udp.html#_3-udp-socket" class="sidebar-link">3. UDP Socket</a></li><li class="sidebar-sub-header"><a href="/python/senior/udp.html#_4-tftp" class="sidebar-link">4. TFTP</a></li></ul></li><li><a href="/python/senior/tcp.html" class="sidebar-link">TCP</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/senior/tcp.html#_1-三次握手" class="sidebar-link">1. 三次握手</a></li><li class="sidebar-sub-header"><a href="/python/senior/tcp.html#_2-四次挥手" class="sidebar-link">2. 四次挥手</a></li><li class="sidebar-sub-header"><a href="/python/senior/tcp.html#_3-2msl" class="sidebar-link">3. 2MSL</a></li><li class="sidebar-sub-header"><a href="/python/senior/tcp.html#_4-tcp-socket" class="sidebar-link">4. TCP Socket</a></li><li class="sidebar-sub-header"><a href="/python/senior/tcp.html#_5-长连接与短连接" class="sidebar-link">5. 长连接与短连接</a></li><li class="sidebar-sub-header"><a href="/python/senior/tcp.html#_6-多任务tcp服务器" class="sidebar-link">6. 多任务TCP服务器</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>算法与数据结构</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/datastructure/algorithm.html" class="sidebar-link">算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/algorithm.html#_1-算法" class="sidebar-link">1. 算法</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/algorithm.html#_2-时间复杂度" class="sidebar-link">2. 时间复杂度</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/algorithm.html#_3-timeit" class="sidebar-link">3. timeit</a></li></ul></li><li><a href="/python/datastructure/sort.html" class="sidebar-link">排序算法与搜索算法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_1-排序算法的稳定性" class="sidebar-link">1. 排序算法的稳定性</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_2-冒泡排序" class="sidebar-link">2. 冒泡排序</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_3-选择排序" class="sidebar-link">3. 选择排序</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_4-插入排序" class="sidebar-link">4. 插入排序</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_5-希尔排序" class="sidebar-link">5. 希尔排序</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_6-归并排序" class="sidebar-link">6. 归并排序</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_7-快速排序" class="sidebar-link">7. 快速排序</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_8-排序算法效率" class="sidebar-link">8. 排序算法效率</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sort.html#_9-搜索" class="sidebar-link">9. 搜索</a></li></ul></li><li><a href="/python/datastructure/datastructure.html" class="sidebar-link">数据结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/datastructure.html#_1-数据结构" class="sidebar-link">1. 数据结构</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/datastructure.html#_2-算法与数据结构" class="sidebar-link">2. 算法与数据结构</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/datastructure.html#_3-抽象数据类型-adt" class="sidebar-link">3. 抽象数据类型(ADT)</a></li></ul></li><li><a href="/python/datastructure/sequencelist.html" class="sidebar-link">顺序表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/sequencelist.html#_1-线性表" class="sidebar-link">1. 线性表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sequencelist.html#_2-顺序表" class="sidebar-link">2. 顺序表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sequencelist.html#_3-存储方式" class="sidebar-link">3. 存储方式</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sequencelist.html#_4-存储结构" class="sidebar-link">4. 存储结构</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sequencelist.html#_5-常用操作" class="sidebar-link">5. 常用操作</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/sequencelist.html#_6-python-顺序表" class="sidebar-link">6. Python 顺序表</a></li></ul></li><li><a href="/python/datastructure/linkedlist.html" class="sidebar-link">链表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/linkedlist.html#_1-链表" class="sidebar-link">1. 链表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/linkedlist.html#_2-单向链表" class="sidebar-link">2. 单向链表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/linkedlist.html#_3-单向循环链表" class="sidebar-link">3. 单向循环链表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/linkedlist.html#_4-双向链表" class="sidebar-link">4. 双向链表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/linkedlist.html#_5-顺序表与链表" class="sidebar-link">5. 顺序表与链表</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/linkedlist.html#_6-python-链表" class="sidebar-link">6. Python 链表</a></li></ul></li><li><a href="/python/datastructure/stackqueue.html" class="sidebar-link">栈 / 队列</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/stackqueue.html#_1-栈" class="sidebar-link">1. 栈</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/stackqueue.html#_2-队列" class="sidebar-link">2. 队列</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/stackqueue.html#_3-双端队列" class="sidebar-link">3. 双端队列</a></li></ul></li><li><a href="/python/datastructure/tree.html" class="sidebar-link">树</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/datastructure/tree.html#_1-树" class="sidebar-link">1. 树</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/tree.html#_2-二叉树" class="sidebar-link">2. 二叉树</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/tree.html#_3-构建二叉树" class="sidebar-link">3. 构建二叉树</a></li><li class="sidebar-sub-header"><a href="/python/datastructure/tree.html#_4-遍历二叉树" class="sidebar-link">4. 遍历二叉树</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>数据操作</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/database/mysql.html" class="sidebar-link">MySQL</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/database/mysql.html#_1-mysql" class="sidebar-link">1. MySQL</a></li><li class="sidebar-sub-header"><a href="/python/database/mysql.html#_2-pymysql" class="sidebar-link">2. PyMySQL</a></li><li class="sidebar-sub-header"><a href="/python/database/mysql.html#_3-sqlhelper" class="sidebar-link">3. SqlHelper</a></li></ul></li><li><a href="/python/database/redis.html" class="sidebar-link">Redis</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/database/redis.html#_1-redis-交互" class="sidebar-link">1. Redis 交互</a></li><li class="sidebar-sub-header"><a href="/python/database/redis.html#_2-redis-集群交互" class="sidebar-link">2. Redis 集群交互</a></li></ul></li><li><a href="/python/database/mongo.html" class="sidebar-link">MongoDB</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="日志处理"><a href="#日志处理" class="header-anchor">#</a> 日志处理</h1> <p><code>logging</code>模块中封装了基础的日志功能，它提供了以下两种方式来记录日志：</p> <ul><li>使用logging日志模块函数简单记录日志</li> <li>使用logging日志系统组件记录日志</li></ul> <p>前者封装了后者相关内容，提供了更简答的使用方式。</p> <h2 id="_1-logging-简单日志"><a href="#_1-logging-简单日志" class="header-anchor">#</a> 1. logging 简单日志</h2> <h3 id="_1-1-记录日志"><a href="#_1-1-记录日志" class="header-anchor">#</a> 1.1 记录日志</h3> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> logging

logging<span class="token punctuation">.</span>debug<span class="token punctuation">(</span><span class="token string">'debug log'</span><span class="token punctuation">)</span>
logging<span class="token punctuation">.</span>info<span class="token punctuation">(</span><span class="token string">'info log'</span><span class="token punctuation">)</span>
logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'warning log'</span><span class="token punctuation">)</span>
logging<span class="token punctuation">.</span>error<span class="token punctuation">(</span><span class="token string">'error log'</span><span class="token punctuation">)</span>
logging<span class="token punctuation">.</span>critical<span class="token punctuation">(</span><span class="token string">'critical log'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>以上<code>logging.debug()</code>等方法的定义中，除了<code>msg</code>和<code>args</code>参数，还有一个<code>**kwargs</code>参数支持3个关键字参数<code>exc_info, stack_info, extra</code>。</p> <table><thead><tr><th style="text-align:left;">可选命名参数</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>exc_info</code></td> <td style="text-align:left;">bool。若为True会将异常信息添加到日志消息中</td></tr> <tr><td style="text-align:left;"><code>stack_info</code></td> <td style="text-align:left;">bool。若为True，堆栈信息将会被添加到日志信息中</td></tr> <tr><td style="text-align:left;"><code>extra</code></td> <td style="text-align:left;">dict。用来定义消息格式中所含的字段</td></tr></tbody></table> <h3 id="_1-2-简单配置"><a href="#_1-2-简单配置" class="header-anchor">#</a> 1.2 简单配置</h3> <p><code>logging.basicConfig()</code>用于对日志进行简单配置。</p> <table><thead><tr><th style="text-align:left;">basicConfig 参数</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;">level</td> <td style="text-align:left;">设置日志最低输出级别，默认为<code>logging.WARNING</code>(枚举)</td></tr> <tr><td style="text-align:left;">format</td> <td style="text-align:left;">格式化日志输出。可选字段格式见下表</td></tr> <tr><td style="text-align:left;">filename</td> <td style="text-align:left;">设置日志保存文件</td></tr> <tr><td style="text-align:left;">filemode</td> <td style="text-align:left;">设置日志文件写入方式。<code>w</code>表示覆盖写入，<code>a</code>表示追加写入</td></tr> <tr><td style="text-align:left;">stream</td> <td style="text-align:left;">日志输出目标stream，如sys.stdout、sys.stderr以及网络stream</td></tr> <tr><td style="text-align:left;">handlers</td> <td style="text-align:left;">日志处理程序列表</td></tr></tbody></table> <p><small>filename、stream和handlers这三个配置项只能同时存在一项，否则会引发<code>ValueError</code>异常。</small></p> <table><thead><tr><th style="text-align:left;">format 字段格式</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>%(levelname)s</code></td> <td style="text-align:left;">级别名称(被filter修改后的)</td></tr> <tr><td style="text-align:left;"><code>%(levelno)s</code></td> <td style="text-align:left;">日志记录的数字形式的日志级别(10, 20, 30, 40, 50)</td></tr> <tr><td style="text-align:left;"><code>%(name)s</code></td> <td style="text-align:left;">logger名称，默认为<code>root</code></td></tr> <tr><td style="text-align:left;"><code>%(pathname)s</code></td> <td style="text-align:left;">日志产生模块的完整路径名</td></tr> <tr><td style="text-align:left;"><code>%(filename)s</code></td> <td style="text-align:left;">pathname的文件名部分</td></tr> <tr><td style="text-align:left;"><code>%(module)s</code></td> <td style="text-align:left;">filename无后缀</td></tr> <tr><td style="text-align:left;"><code>%(lineno)d</code></td> <td style="text-align:left;">当前行号</td></tr> <tr><td style="text-align:left;"><code>%(funcName)s</code></td> <td style="text-align:left;">日志产生的函数名</td></tr> <tr><td style="text-align:left;"><code>%(message)s</code></td> <td style="text-align:left;">日志内容</td></tr> <tr><td style="text-align:left;"><code>%(asctime)s</code></td> <td style="text-align:left;">日记产生时间</td></tr> <tr><td style="text-align:left;"><code>%(process)s</code></td> <td style="text-align:left;">当前进程ID</td></tr> <tr><td style="text-align:left;"><code>%(processName)s</code></td> <td style="text-align:left;">当前进程名称</td></tr> <tr><td style="text-align:left;"><code>%(thread)s</code></td> <td style="text-align:left;">当前线程ID</td></tr> <tr><td style="text-align:left;"><code>%(threadName)s</code></td> <td style="text-align:left;">当前线程名称</td></tr></tbody></table> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">import</span> logging

logging<span class="token punctuation">.</span>basicConfig<span class="token punctuation">(</span>level<span class="token operator">=</span>logging<span class="token punctuation">.</span>DEBUG<span class="token punctuation">,</span>
                    <span class="token builtin">format</span><span class="token operator">=</span><span class="token string">'%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s'</span><span class="token punctuation">,</span>
                    filename<span class="token operator">=</span><span class="token string">&quot;log.txt&quot;</span><span class="token punctuation">,</span>
                    filemode<span class="token operator">=</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span>

logging<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">'this is a warning log'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>程序中只需要进行一次日志配置，即可全局生效，一般在程序入口做统一配置</strong></p> <h2 id="_2-logging-组件"><a href="#_2-logging-组件" class="header-anchor">#</a> 2. logging 组件</h2> <table><thead><tr><th style="text-align:left;">组件</th> <th style="text-align:left;">说明</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>loggers</code></td> <td style="text-align:left;">提供应用程序代码直接使用的接口</td></tr> <tr><td style="text-align:left;"><code>handlers</code></td> <td style="text-align:left;">用于将日志记录发送到指定的目的位置</td></tr> <tr><td style="text-align:left;"><code>filters</code></td> <td style="text-align:left;">提供更细粒度的日志过滤功能，用于决定哪些日志记录将会被输出</td></tr> <tr><td style="text-align:left;"><code>formatters</code></td> <td style="text-align:left;">用于控制日志信息的最终输出格式</td></tr></tbody></table> <p><code>loggers</code>负责采集日志，<code>handlers</code>负责处理日志，如发送异常信息，每个<code>handler</code>可以定制<code>filters</code>过滤日志以及<code>formatters</code>格式化日志。</p> <h3 id="_2-1-logger"><a href="#_2-1-logger" class="header-anchor">#</a> 2.1 Logger</h3> <p><code>logging.getLogger([name])</code>可以获取一个<code>Logger</code>对象,默认名为<code>root</code>。</p> <table><thead><tr><th style="text-align:left;">方法</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>setLevel()</code></td> <td style="text-align:left;">设置最低日志级别。低于此级别日志将被丢弃</td></tr> <tr><td style="text-align:left;"><code>addHandler() / removeHandler()</code></td> <td style="text-align:left;">新增/删除一个<code>handler</code></td></tr> <tr><td style="text-align:left;"><code>addFilter() / removeFilter()</code></td> <td style="text-align:left;">新增/删除一个<code>filter</code></td></tr> <tr><td style="text-align:left;"><code>debug() / info() / warning() / error() / critical()</code></td> <td style="text-align:left;">记录不同级别日志</td></tr> <tr><td style="text-align:left;"><code>exception()</code></td> <td style="text-align:left;">记录异常日志(含堆栈追踪信息)，通常<code>exception handler</code>中使用</td></tr></tbody></table> <ul><li><code>Logger</code>对象通过其名称构成层级结构。其名称以<code>'.'</code>分割，<code>'.'</code>后面的<code>logger</code>是前面的<code>children</code>，如，名为 <code>foo.bar</code>, <code>foo.bar.baz</code> 和 <code>foo.bam</code>的<code>logger</code>都是 <code>foo</code> 的<code>children</code>。</li> <li><code>Logger</code>对象都有一个有效等级(effective level),若未显式设置则将从其祖先继承。<code>root</code>默认level为<code>WARNING</code></li> <li><code>Logger</code>对象的<code>handler</code>处理完成后，会沿记成链继续向上传递。因此<code>root</code>绑定的<code>handler</code>可以捕捉到所有日志。可以设置<code>logger.propagate=False</code>关闭某个对象的传递机制。</li></ul> <h3 id="_2-2-handler"><a href="#_2-2-handler" class="header-anchor">#</a> 2.2 Handler</h3> <p><code>Handler</code>对象的作用是（基于日志消息的level）将消息分发到handler指定的位置（文件、网络、邮件等）。<code>Logger</code>对象添加任意个<code>Handler</code>对象。</p> <table><thead><tr><th style="text-align:left;">方法</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>setLevel()</code></td> <td style="text-align:left;">设置最低日志级别。低于此级别日志将被丢弃</td></tr> <tr><td style="text-align:left;"><code>setFormatter()</code></td> <td style="text-align:left;">设置一个<code>formatter</code></td></tr> <tr><td style="text-align:left;"><code>addFilter() / removeFilter()</code></td> <td style="text-align:left;">添加/删除一个<code>filter</code></td></tr></tbody></table> <p><code>Handler</code>是一个抽象类，不应被实例化，其常用示例子类如下表。</p> <table><thead><tr><th style="text-align:left;">Handler</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td style="text-align:left;"><code>logging.StreamHandler</code></td> <td style="text-align:left;">将日志发送到输出到Stream，如std.out, std.err或任何file-like对象。</td></tr> <tr><td style="text-align:left;"><code>logging.FileHandler</code></td> <td style="text-align:left;">将日志发送到磁盘文件，默认情况下文件大小会无限增长</td></tr> <tr><td style="text-align:left;"><code>logging.NullHandler</code></td> <td style="text-align:left;">忽略error messages。可以避免<code>No handlers could be found for logger XXX</code>错误</td></tr> <tr><td style="text-align:left;"><code>logging.handlers.RotatingFileHandler</code></td> <td style="text-align:left;">将日志发送到磁盘文件，并支持日志文件按大小切割</td></tr> <tr><td style="text-align:left;"><code>logging.hanlders.TimedRotatingFileHandler</code></td> <td style="text-align:left;">将日志发送到磁盘文件，并支持日志文件按时间切割</td></tr> <tr><td style="text-align:left;"><code>logging.handlers.SocketHandler</code></td> <td style="text-align:left;">将日志发送到<a href="/python/senior/tcp.html">TCP Socket</a></td></tr> <tr><td style="text-align:left;"><code>logging.handlers.DatagramHandler</code></td> <td style="text-align:left;">将日志发送到<a href="/python/senior/udp.html">UDP Socket</a></td></tr> <tr><td style="text-align:left;"><code>logging.handlers.HTTPHandler</code></td> <td style="text-align:left;">将日志发送到web服务器(支持GET和POST)</td></tr> <tr><td style="text-align:left;"><code>logging.handlers.SMTPHandler</code></td> <td style="text-align:left;">将日志发送到email</td></tr> <tr><td style="text-align:left;"><code>logging.handlers.QueueHandler</code></td> <td style="text-align:left;">将日志添加到指定<a href="/python/senior/process.html#_4-进程间通信-ipc">多进程队列</a></td></tr></tbody></table> <h3 id="_2-3-formater"><a href="#_2-3-formater" class="header-anchor">#</a> 2.3 Formater</h3> <p><code>Formater</code>用于配置日志信息的最终顺序、结构和内容。可以直接实例化<code>Formatter</code>类。也可以实现一个<code>Formatter</code>的子类来完成自定义处理行为。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code>Formatter<span class="token punctuation">(</span>fmt<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> datefmt<span class="token operator">=</span><span class="token boolean">None</span><span class="token punctuation">,</span> style<span class="token operator">=</span><span class="token string">'%'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>fmt。消息格式化字符串，默认为message原始值</li> <li>datefmt。日期格式字符串，默认为<code>%Y-%m-%d %H:%M:%S</code></li> <li>style。可取值为<code>%</code>,<code>{</code>,<code>$</code>，默认为<code>%</code></li></ul> <h3 id="_2-4-filter"><a href="#_2-4-filter" class="header-anchor">#</a> 2.4 Filter</h3> <p><code>Filter</code>可以被<code>Handler</code>和<code>Logger</code>用来做比<code>level</code>更细粒度的、更复杂的过滤功能。<code>Filter</code>是一个过滤器基类，它只允许某个<code>logger</code>层级下的日志事件通过过滤。</p> <div class="language-py line-numbers-mode"><pre class="language-py"><code><span class="token keyword">class</span> <span class="token class-name">logging</span><span class="token punctuation">.</span>Filter<span class="token punctuation">(</span>name<span class="token operator">=</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token builtin">filter</span><span class="token punctuation">(</span>record<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>如，一个filter实例化时传递的name参数值为'A.B'，那么该filter实例将只允许名称为类似如下规则的loggers产生的日志记录通过过滤：'A.B'，'A.B,C'，'A.B.C.D'，'A.B.D'，而名称为'A.BB', 'B.A.B'的loggers产生的日志则会被过滤掉。如果name的值为空字符串，则允许所有的日志事件通过过滤。</p> <p><code>filter</code>方法用于具体控制传递的<code>record</code>记录是否能通过过滤，如果该方法返回值为<code>0</code>表示不能通过过滤，返回值为非<code>0</code>表示可以通过过滤。如果有需要，也可以在<code>filter</code>(<code>record</code>)方法内部改变该<code>record</code>，比如添加、删除或修改一些属性。我们还可以通过<code>filter</code>做一些统计工作，比如可以计算下被一个特殊的<code>logger</code>或<code>handler</code>所处理的<code>record</code>数量等。</p> <h2 id="_3-日志处理"><a href="#_3-日志处理" class="header-anchor">#</a> 3. 日志处理</h2> <h3 id="_3-1-日志处理流程"><a href="#_3-1-日志处理流程" class="header-anchor">#</a> 3.1 日志处理流程</h3> <p>使用<code>logging</code>四大组件处理日志的简要流程如下:</p> <ol><li>创建一个<code>logger</code></li> <li>设置<code>logger</code>的日志的等级</li> <li>创建合适的<code>Handler</code></li> <li>设置每个<code>Handler</code>的日志等级</li> <li>创建日志的<code>Formatter</code></li> <li>向<code>Handler</code>中添加<code>Formatter</code></li> <li>将上面创建的<code>Handler</code>添加到<code>logger</code>中</li> <li>输出日志</li></ol> <p>一条日志信息要想被最终输出需要依次经过以下几次过滤：</p> <ul><li><code>logger</code>等级过滤</li> <li><code>logger.filter</code>过滤</li> <li><code>logger.handler</code>等级过滤</li> <li><code>logger.handler.filter</code>过滤</li></ul> <h3 id="_3-2-记录日志-组件方式"><a href="#_3-2-记录日志-组件方式" class="header-anchor">#</a> 3.2 记录日志(组件方式)</h3> <div class="language-py line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br></div><pre class="language-py"><code><span class="token keyword">import</span> logging
<span class="token keyword">from</span> logging <span class="token keyword">import</span> handlers

<span class="token comment"># 创建logger</span>
logger <span class="token operator">=</span> logging<span class="token punctuation">.</span>getLogger<span class="token punctuation">(</span><span class="token string">&quot;colin_logger&quot;</span><span class="token punctuation">)</span>  <span class="token comment"># 如果参数为空则返回root logger</span>
logger<span class="token punctuation">.</span>setLevel<span class="token punctuation">(</span>logging<span class="token punctuation">.</span>WARNING<span class="token punctuation">)</span>  <span class="token comment"># 设置logger日志等级</span>

<span class="token comment"># 创建handler</span>
stream_handler <span class="token operator">=</span> logging<span class="token punctuation">.</span>StreamHandler<span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment"># 打印到控制台</span>
socket_handler <span class="token operator">=</span> handlers<span class="token punctuation">.</span>SocketHandler<span class="token punctuation">(</span><span class="token string">&quot;192.168.0.200&quot;</span><span class="token punctuation">,</span> <span class="token number">5000</span><span class="token punctuation">)</span>  <span class="token comment"># 发送到指定TCP服务器</span>

<span class="token comment"># 设置输出日志格式</span>
formatter <span class="token operator">=</span> logging<span class="token punctuation">.</span>Formatter<span class="token punctuation">(</span>fmt<span class="token operator">=</span><span class="token string">&quot;%(asctime)s - %(filename)s[line:%(lineno)d] - %(levelname)s: %(message)s&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 为handler指定输出格式，注意大小写</span>
stream_handler<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>
socket_handler<span class="token punctuation">.</span>setFormatter<span class="token punctuation">(</span>formatter<span class="token punctuation">)</span>

<span class="token comment"># 为logger添加的日志处理器</span>
logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>socket_handler<span class="token punctuation">)</span>
logger<span class="token punctuation">.</span>addHandler<span class="token punctuation">(</span>stream_handler<span class="token punctuation">)</span>

<span class="token comment"># 输出不同级别的log</span>
logger<span class="token punctuation">.</span>warning<span class="token punctuation">(</span><span class="token string">&quot;this is a warning log&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">try</span><span class="token punctuation">:</span>
    <span class="token keyword">print</span><span class="token punctuation">(</span>colin<span class="token punctuation">)</span>  <span class="token comment"># 测试异常</span>
<span class="token keyword">except</span> Exception <span class="token keyword">as</span> ex<span class="token punctuation">:</span>
    logger<span class="token punctuation">.</span>error<span class="token punctuation">(</span>ex<span class="token punctuation">,</span> exc_info<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">,</span> stack_info<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span>  <span class="token comment"># 记录错误日志,同时记录异常和堆栈信息</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="_4-日志配置"><a href="#_4-日志配置" class="header-anchor">#</a> 4. 日志配置</h2> <p>配置日志输出有以下三种方式。</p> <ul><li>代码显式的创建<code>loggers</code>, <code>handlers</code>和<code>formatters</code>并分别调用它们的配置函数</li> <li>创建一个日志配置文件，然后使用<code>fileConfig</code>()函数来读取该文件的内容</li> <li>创建一个包含配置信息的<code>dict</code>，然后把它传递个<code>dictConfig</code>()函数</li></ul> <p>三种方式更详尽内容参阅 <a href="https://www.cnblogs.com/yyds/p/6885182.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/yyds/p/6885182.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_5-记录上下文信息"><a href="#_5-记录上下文信息" class="header-anchor">#</a> 5. 记录上下文信息</h2> <p>除了传递给日志记录函数的参数外，有时候我们还想在日志输出中包含一些额外的上下文信息。比如，在一个网络应用中，可能希望在日志中记录客户端的特定信息，如：远程客户端的IP地址和用户名。这里我们来介绍以下几种实现方式：</p> <ul><li>通过向日志记录函数传递一个<code>extra</code>参数引入上下文信息</li> <li>使用<code>LoggerAdapters</code>引入上下文信息</li> <li>使用<code>Filters</code>引入上下文信息</li></ul> <p>三种方式更详尽内容参阅 <a href="https://www.cnblogs.com/yyds/p/6897964.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/yyds/p/6897964.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <h2 id="_6-分布式日志"><a href="#_6-分布式日志" class="header-anchor">#</a> 6. 分布式日志</h2> <p>如果需要使用分布式日志,可以借助<code>logging</code>的<code>HTTPHandler/SocketHandler/DatagramHandler</code>等组件发送日志到分布式日志服务器监听地址。</p> <p><a href="https://architecture.ccstudio.org/log/elk.html" target="_blank" rel="noopener noreferrer">ELK<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>作为流行的分布式日志框架，可以借助<a href="https://github.com/colin-chang/ELK.Stack" target="_blank" rel="noopener noreferrer">Docker快速搭建<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>。</p> <p>分布式日志服务器搭建和使用参见 <a href="https://architecture.ccstudio.org/log/elk.html" target="_blank" rel="noopener noreferrer">https://architecture.ccstudio.org/log/elk.html<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">8/18/2020, 2:30:13 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/python/basic/exception.html" class="prev">
        异常处理
      </a></span> <span class="next"><a href="/python/senior/generator.html">
        生成器
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/python/assets/js/app.e1ee403d.js" defer></script><script src="/python/assets/js/2.968a03f5.js" defer></script><script src="/python/assets/js/18.a3db5906.js" defer></script>
  </body>
</html>
